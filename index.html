ChatGPT ‰ΩúÊàê

<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>üëÄ„Åø„Å¶„Å§„Åè„Çã„Ç∑„Éº„Éàüöó</title>

<style>
*{box-sizing:border-box;-webkit-tap-highlight-color:transparent}
body{
  margin:0;
  font-family:system-ui,-apple-system,BlinkMacSystemFont,"Segoe UI",sans-serif;
  background:#f2f2f2;
  color:#111;
  line-height:1.6;
}
h1{margin:0;font-size:2rem}
button{font-size:1.2rem}

header{
  background:#1565c0;
  color:#fff;
  padding:1.2rem;
  text-align:center;
}

.nav-wrap{
  position:sticky;
  top:0;
  z-index:100;
  background:#fff;
  overflow-x:auto;
  box-shadow:0 2px 6px rgba(0,0,0,.15);
}
.nav{
  display:flex;
  gap:10px;
  padding:10px;
}
.nav button{
  min-width:90px;
  padding:14px;
  border-radius:14px;
  border:none;
  font-weight:700;
  background:#e3f2fd;
}
.nav button.active{
  background:#ff9800;
  color:#fff;
}

main{
  max-width:720px;
  margin:0 auto;
  padding:16px;
}

.card{
  background:#fff;
  border-radius:20px;
  padding:20px;
  margin-bottom:20px;
  box-shadow:0 4px 12px rgba(0,0,0,.08);
}
.card.danger{border:4px solid #d32f2f}
.card.final{background:#fff9c4;border:4px solid #fbc02d}

.title{
  font-size:1.8rem;
  font-weight:900;
  margin-bottom:14px;
}

.photo{
  position:relative;
  margin-bottom:16px;
  border-radius:14px;
  overflow:hidden;
  background:#000;
  touch-action:manipulation;
}
.photo img{
  width:100%;
  display:block;
}
.photo .label{
  position:absolute;
  right:10px;
  bottom:10px;
  background:rgba(0,0,0,.7);
  color:#fff;
  padding:6px 14px;
  border-radius:20px;
  font-size:1rem;
}

.box{
  font-size:1.4rem;
  padding:14px;
  border-radius:14px;
  margin-top:10px;
}
.ok{background:#e8f5e9;font-weight:800}
.note{background:#fff3e0}

.album-btn{
  width:100%;
  padding:22px;
  font-size:1.6rem;
  font-weight:900;
  border:none;
  border-radius:18px;
  background:#4caf50;
  color:#fff;
  margin-bottom:20px;
}

.album{
  display:grid;
  grid-template-columns:repeat(2,1fr);
  gap:14px;
}
.album-item{
  background:#fff;
  border-radius:16px;
  overflow:hidden;
  position:relative;
}
.album-item img{
  width:100%;
  height:100%;
  object-fit:cover;
}
.album-info{
  padding:10px;
}
.album-name{
  font-size:1.2rem;
  font-weight:900;
}
.album-date{
  font-size:1rem;
  color:#555;
}
.del{
  position:absolute;
  top:6px;
  right:6px;
  width:44px;
  height:44px;
  border:none;
  border-radius:50%;
  font-size:1.6rem;
  background:rgba(0,0,0,.7);
  color:#fff;
}

/* overlay */
#overlay{
  position:fixed;
  inset:0;
  background:#000;
  display:none;
  z-index:9999;
  touch-action:none;
}
#overlay img{
  position:absolute;
  user-select:none;
  touch-action:none;
  will-change:transform;
}
#close{
  position:fixed;
  top:20px;
  right:20px;
  width:90px;
  height:90px;
  border-radius:50%;
  font-size:1.4rem;
  font-weight:900;
  border:none;
  background:#fff;
  z-index:10000;
}
</style>
</head>

<body>
<header>
  <h1>üëÄ„Åø„Å¶„Å§„Åè„Çã„Ç∑„Éº„Éàüöó</h1>
</header>

<div class="nav-wrap">
  <div class="nav" id="nav"></div>
</div>

<main id="main"></main>

<div id="overlay">
  <button id="close">„Å®„Åò„Çã<br>√ó</button>
  <img id="zoomImg">
</div>

<script>
const steps=[
 { nav:"‚ë† „Åß„Çì„Å°", title:"‚ë† „Åß„Çì„Å°ÔºàBOXÔºâ", img1:"images/battery_box.jpg", ok:"ÈõªÊ±†„ÅÆÂêë„ÅçOKÔºÅ", note:"Ôºã„Å®Ôºç„ÇíÁ¢∫Ë™ç„Åó„Åæ„Åô„ÄÇ" },
 { nav:"‚ë° „Åõ„Çì", title:"‚ë° ÈõªÊ±†„Å´„Å§„Åë„ÇãÈõªÁ∑ö", img1:"images/wire_magnet.jpg", ok:"Á∑ö„Åå„Å§„Å™„Åå„Å£„ÅüÔºÅ", note:"Á£ÅÁü≥„Åå„Åó„Å£„Åã„Çä‰ªò„ÅÑ„Å¶„ÅÑ„Çã„ÅãÁ¢∫Ë™ç„ÄÇ" },
 { nav:"‚ë¢ „Çπ„Ç§„ÉÉ„ÉÅ", title:"‚ë¢ ÂâçÂæåÂàá„ÇäÊõø„Åà„Çπ„Ç§„ÉÉ„ÉÅ", img1:"images/switch_complete.jpg", ok:"ÂâçÂæå„ÅåÂàá„ÇäÊõø„Çè„ÇãÔºÅ", note:"Â∑¶Âè≥SW„ÇíÊäº„Åó„Å¶Âàá„ÇäÊõø„Çè„Çã„ÅãÁ¢∫Ë™ç„ÄÇ" },
 { nav:"‚ë£ „Åæ„Çè„Çã", title:"‚ë£ „É¢„Éº„Çø„Éº„ÅØÂõû„ÇãÔºü", img1:"images/motor_test.jpg", ok:"Âõû„Çå„Å∞ OK", note:"Êåá„ÇíËøë„Å•„Åë„Å™„ÅÑ„Çà„ÅÜÊ≥®ÊÑè„ÄÇ" },
 { nav:"‚ë§ „Åø„Åü„ÇÅ", title:"‚ë§ Ë¶ã„ÅüÁõÆÂÆåÊàêÔºàÂÆüÈ®ì‰∏≠Ôºâ", img1:"images/car_complete.jpg", ok:"„Å§„Å™„ÅéÊñπ„Çí„Åü„ÇÅ„Åù„ÅÜÔºÅ", note:"ÂâçÂæå„ÅåÈÄÜ„Å™„ÇâÂÖ•„ÇåÊõø„Åà„Å¶„Åø„Çà„ÅÜ„ÄÇ", danger:true },
 { nav:"‚ë• „Åã„Çì„Åõ„ÅÑ", title:"‚ë• „Åª„Çì„Å®„ÅÜ„ÅÆÂÆåÊàêÔºÅ", img1:"images/complete.jpg", ok:"ÂâçÂæå„Å´Âãï„ÅÑ„Åü„ÇâÂ§ßÊàêÂäüÔºÅ", note:"ÂÆâÂÖ®„Å´Ëµ∞„Çâ„Åõ„Çà„ÅÜ„ÄÇ", final:true },
 { nav:"üì∏„Ç¢„É´„Éê„É†", title:"üì∏ „Åä„ÇÇ„ÅÑ„Åß„Ç¢„É´„Éê„É†", isAlbum:true }
];

let current=0;
const nav=document.getElementById("nav");
const main=document.getElementById("main");

/* album */
const KEY="myAlbumV3";
const getAlbum=()=>JSON.parse(localStorage.getItem(KEY)||"[]");
const saveAlbum=a=>localStorage.setItem(KEY,JSON.stringify(a));

function render(){
  nav.innerHTML="";
  steps.forEach((s,i)=>{
    const b=document.createElement("button");
    b.textContent=s.nav;
    b.className=i===current?"active":"";
    b.onclick=()=>{current=i;render();scrollTo(0,0)};
    nav.appendChild(b);
  });
  const s=steps[current];
  s.isAlbum?renderAlbum():renderStep(s);
}

function renderStep(s){
  main.innerHTML=`
  <div class="card ${s.danger?"danger":""} ${s.final?"final":""}">
    <div class="title">${s.title}</div>
    <div class="photo" onclick="openZoom('${s.img1}')">
      <img src="${s.img1}">
      <div class="label">„Çø„ÉÉ„Éó„ÅßÊã°Â§ß</div>
    </div>
    <div class="box ok">‚úÖ ${s.ok}</div>
    <div class="box note">üí° ${s.note}</div>
  </div>`;
}

function renderAlbum(){
  const album=getAlbum().sort((a,b)=>b.ts-a.ts);
  main.innerHTML=`
  <div class="card">
    <div class="title">üì∏ „Åä„ÇÇ„ÅÑ„Åß„Ç¢„É´„Éê„É†</div>
    <button class="album-btn" onclick="pick()">üì∑ ÂÜôÁúü„Çí„Å®„Çã„Éª„Åà„Çâ„Å∂</button>
    <input type="file" id="file" accept="image/*" capture="environment" hidden>
    <div class="album">
      ${album.map(a=>`
      <div class="album-item">
        <button class="del" onclick="del(${a.ts})">√ó</button>
        <div class="photo" onclick="openZoom('${a.data}')">
          <img src="${a.data}">
        </div>
        <div class="album-info">
          <div class="album-name">${a.name}</div>
          <div class="album-date">${new Date(a.ts).toLocaleString("ja-JP")}</div>
        </div>
      </div>`).join("")}
    </div>
  </div>`;
  document.getElementById("file").onchange=load;
}

function pick(){document.getElementById("file").click()}
function load(e){
  const f=e.target.files[0];
  if(!f)return;
  const name=prompt("Â∑•‰Ωú„ÅÆ„Å™„Åæ„Åà","„Åò„Å∂„Çì„ÅÆÂ∑•‰Ωú");
  if(!name)return;
  const r=new FileReader();
  r.onload=ev=>{
    const a=getAlbum();
    a.push({name,data:ev.target.result,ts:Date.now()});
    saveAlbum(a);
    render();
  };
  r.readAsDataURL(f);
}
function del(ts){
  if(!confirm("Ê∂à„Åó„Åæ„Åô„ÅãÔºü"))return;
  saveAlbum(getAlbum().filter(a=>a.ts!==ts));
  render();
}

/* zoom */
const overlay=document.getElementById("overlay");
const img=document.getElementById("zoomImg");
let scale=1,x=0,y=0;
let pointers={};

function openZoom(src){
  img.src=src;
  overlay.style.display="block";
  scale=1;x=0;y=0;
  update();
}

function update(){
  const mobile=innerHeight>innerWidth;
  let t=`translate(${x}px,${y}px) scale(${scale})`;
  if(mobile)t+=" rotate(90deg)";
  img.style.transform=t;
  img.style.left="50%";
  img.style.top="50%";
  img.style.transformOrigin="center";
}

img.addEventListener("pointerdown",e=>e.stopPropagation());
img.addEventListener("pointermove",e=>e.stopPropagation());
img.addEventListener("pointerup",e=>e.stopPropagation());
img.addEventListener("pointercancel",e=>e.stopPropagation());

overlay.addEventListener("pointerdown",e=>{
  pointers[e.pointerId]=e;
});
overlay.addEventListener("pointermove",e=>{
  if(!pointers[e.pointerId])return;
  const prev=pointers[e.pointerId];
  pointers[e.pointerId]=e;
  const ps=Object.values(pointers);
  if(ps.length===2){
    const [a,b]=ps;
    const d=Math.hypot(a.clientX-b.clientX,a.clientY-b.clientY);
    const pd=Math.hypot(prev.clientX-b.clientX,prev.clientY-b.clientY);
    scale=Math.min(Math.max(1,scale*d/pd),5);
  }else if(ps.length===1){
    if(scale<=1.01)return;
    x+=e.clientX-prev.clientX;
    y+=e.clientY-prev.clientY;
  }
  update();
});
["pointerup","pointercancel"].forEach(ev=>{
  overlay.addEventListener(ev,e=>delete pointers[e.pointerId]);
});
overlay.onclick=e=>{if(e.target===overlay)overlay.style.display="none"};
document.getElementById("close").onclick=e=>{e.stopPropagation();overlay.style.display="none"};

render();
</script>
</body>
</html>
